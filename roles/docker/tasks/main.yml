---
# tasks file for docker
  - name: "installdependencies"
    apt:
      name: "{{ item }}"
      state: latest
      update_cache: yes      
    with_items: "{{ common_dependencies }}"
    when: ansible_distribution == "Ubuntu"
    
  - name: "Add Docker GPG apt key"
    ansible.builtin.apt_key:
      url: "https://download.docker.com/linux/{{ ansible_distribution | lower }}/gpg"
      state: present

  - name: 'Add Docker apt repository'  
    ansible.builtin.apt_repository:
      repo: "deb https://download.docker.com/linux/{{ ansible_distribution | lower }} {{ ansible_distribution_release }} stable"
      state: present

  - name: 'Install Docker'
    apt:
      name: "{{ item }}"
      state: latest
      update_cache: yes
    with_items: "{{ docker_dependencies }}"
    when: ansible_distribution == 'Ubuntu'
